<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dynamic Parameter</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Extension Library (this will be hosted on a CDN eventually) -->
    <script src="js/tableau-extensions-0.9.0.js"></script>

    <!-- Dynamic Parameter js & css -->
    <script src="js/dynamic_parameter.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container-fluid" style="padding:0px;">
        <div id="loading">
            Loading...
        </div>

        <div id="showset" style="display:none;">
            <p id="showwsname" class="completed" style="display:none;"></p>
            <p id="showdsname" class="completed" style="display:none;"></p>
            <p id="showfname" class="completed" style="display:none;"></p>
        </div>

        <div id="wsselect" class="form-inline" style="display:none;">
            <div class="step"><span><b>Step 1:</b> Select which worksheet that has the data source you would like to use to populate the parameter.</span></div>
            <div class="form-group">
                <select class="form-control" id="wsselector">
                        <option value='' disabled>Loading worksheets...</option>
                </select>
                <button type="submit" id="wsselected" class="btn btn-teal" onClick="setWorksheet()">Set Worksheet</button>
                <div id="wserror"> </div>
            </div>
        </div>

        <div id="dsselect" class="form-inline" style="display:none;">
            <div class="step"><span><b>Step 2:</b> Select which data source that has the field you would like to use to populate the parameter.</span></div>
            <div class="form-group">
                <select class="form-control" id="dsselector">
                        <option value='' disabled>Loading data sources...</option>
                </select>
                <button type="submit" id="dsselected" class="btn btn-teal" onClick="setDataSource()">Set Data Source</button>
                <div id="dserror"> </div>
            </div>
        </div>
        <p id="nods" class="warning" style="display:none;">You must have a data source on your worksheet. Please add a data source and reload the Add-In.</p>

        <div id="fselect" class="form-inline" style="display:none;">
            <div class="step"><span><b>Step 3:</b> Select which field to populate the parameter from.</span></div>
            <div class="form-group">
                <select class="form-control" id="fselector">
                        <option value='' disabled>Loading fields...</option>
                    </select>
                <button type="submit" id="fieldselected" class="btn btn-teal" onClick="setField()">Set Field</button>
                <div id="ferror"> </div>
            </div>
        </div>

        <div id="pselect" class="form-inline" style="display:none;">
            <div class="step"><span><b>Step 4:</b> Select an existing parameter to change. Parameter must allow all inputs.</span></div>
            <div class="form-group">
                <select class="form-control" id="pselector">
                        <option value='' disabled>Loading parameters...</option>
                </select>
                <button type="submit" id="paramselected" class="btn btn-teal" onClick="setParam()">Set Parameter</button>
                <div id="perror"> </div>
            </div>
        </div>

        <div id="reset" style="padding-top:10px;display:none;">
            <button type="submit" id="resetbutton" class="btn btn-danger btn-sm" onClick="resetSettings()">Clear Settings</button>
        </div>

        <div id="dropdown" class="form-inline" style="display:none;">
            <div class="form-group" style="width:100%;">
                <select class="form-control" name="dropdown" id="dynamicparameter" onChange="updateParam(this.value)" style="width:calc(100% - 30px)"></select>
                <img onClick="updateRelevant()" id="relimg" src="imgs/relevant.png" style="width:10px;overflow:hidden;cursor:pointer;" title="Toggle Relevant">
                <img onClick="resetSettings()" src="imgs/clear-button.png" style="width:10px;overflow:hidden;cursor:pointer;" title="Reset Dynamic Parameter">
            </div>
        </div>
    </div>
</body>

</html>